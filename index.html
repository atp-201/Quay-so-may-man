<!DOCTYPE html> 
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>S·ªë May M·∫Øn</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#b9f5d6;
}
.container{
    max-width:380px;
    margin:20px auto;
    background:#fff;
    border-radius:16px;
    padding:20px;
    box-shadow:0 10px 30px rgba(0,0,0,.1);
}
.tab{
    display:flex;
    background:#eee;
    border-radius:30px;
    overflow:hidden;
    margin-bottom:20px;
}
.tab div{
    flex:1;
    padding:10px;
    text-align:center;
    font-weight:bold;
    background:#6ee64d;
    color:#fff;
}
h2{text-align:center;}
.option{
    display:flex;
    gap:20px;
    margin-bottom:15px;
}
.option label{
    display:flex;
    align-items:center;
    gap:6px;
}
.group{margin-bottom:15px;}
.group input,.group select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}
.button button{
    width:100%;
    padding:14px;
    font-size:18px;
    border:none;
    border-radius:30px;
    background:#111;
    color:#fff;
    cursor:pointer;
}
.result{
    margin-top:15px;
    background:#f8f8f8;
    border-radius:12px;
    padding:15px;
    text-align:center;
}
.result span{
    font-size:48px;
    color:red;
    font-weight:bold;
}
#history{
    margin-top:10px;
    font-size:14px;
    text-align:left;
    max-height:120px;
    overflow:auto;
}
.hidden{display:none;}

.firework{
    position:fixed;
    width:6px;
    height:6px;
    border-radius:50%;
    animation:explode 1s ease-out forwards;
}
@keyframes explode{
    to{
        transform:translate(var(--x),var(--y));
        opacity:0;
    }
}
</style>
</head>

<body>

<div class="container">
    <div class="tab">
        <div>S·ªê MAY M·∫ÆN</div>
    </div>

    <h2>CH·ªåN S·ªê NG·∫™U NHI√äN</h2>

    <div class="option">
        <label><input type="radio" name="mode" checked onclick="setMode('range')"> Ch·ªçn s·ªë</label>
        <label><input type="radio" name="mode" onclick="setMode('list')"> Nh·∫≠p s·ªë</label>
    </div>

    <div id="rangeMode">
        <div class="group">
            <label>T·ª´ s·ªë:</label>
            <input type="number" id="min" value="1">
        </div>
        <div class="group">
            <label>ƒê·∫øn s·ªë:</label>
            <input type="number" id="max" value="50">
        </div>
    </div>

    <div id="listMode" class="hidden">
        <div class="group">
            <label>Nh·∫≠p v√†o:</label>
            <input type="text" id="list" placeholder="01,34,78,89,90">
        </div>
    </div>

    <div class="group">
        <label>Th·ªùi gian quay:</label>
        <select id="time">
            <option value="3000">3 gi√¢y</option>
            <option value="5000" selected>5 gi√¢y</option>
            <option value="10000">10 gi√¢y</option>
            <option value="15000">15 gi√¢y</option>
            <option value="20000">20 gi√¢y</option>
        </select>
    </div>

    <div class="button">
        <button onclick="spin()">QUAY S·ªê</button>
    </div>

    <div class="button">
        <button onclick="resetHistory()" style="background:#e53935">
            Reset l·ªãch s·ª≠
        </button>
    </div>

    <div class="result">
        <span id="output">00</span>
        <div id="history"></div>
    </div>

    <!-- üîê RIG PANEL (·∫®N) -->
    <div id="rigPanel" class="hidden" style="margin-top:15px;font-size:14px;border-top:1px dashed #ccc;padding-top:10px">
        <label>
            <input type="checkbox" id="rigMode"> Ch·∫ø ƒë·ªô rig
        </label>
        <input type="number" id="rigNumber"
               placeholder="S·ªë ƒë·∫∑t tr∆∞·ªõc"
               style="margin-top:6px;width:100%">
    </div>
</div>

<audio id="bgMusic" src="spin.mp3" loop></audio>

<script>
let mode = "range";
let timer;
let history = JSON.parse(localStorage.getItem("history")) || [];

function setMode(m){
    mode = m;
    rangeMode.classList.toggle("hidden", m !== "range");
    listMode.classList.toggle("hidden", m !== "list");
}

function renderHistory(){
    historyDiv.innerHTML = history.map(n=>`üéâ ${n}`).join("<br>");
}
const historyDiv = document.getElementById("history");
renderHistory();

/* AUTO MUSIC */
window.addEventListener("click",()=>{
    bgMusic.play();
},{once:true});

/* RANDOM */
function getRandomRange(min,max){
    let arr=[];
    for(let i=min;i<=max;i++){
        if(!history.includes(i)) arr.push(i);
    }
    if(arr.length===0) return null;
    return arr[Math.floor(Math.random()*arr.length)];
}

function getRandomList(arr){
    arr = arr.filter(n=>!history.includes(n));
    if(arr.length===0) return null;
    return arr[Math.floor(Math.random()*arr.length)];
}

/* RIG */
function getRig(){
    if(!rigMode.checked) return null;
    let n = parseInt(rigNumber.value);
    if(isNaN(n) || history.includes(n)) return null;
    return n;
}

/* FIREWORK */
function firework(){
    for(let i=0;i<30;i++){
        let f=document.createElement("div");
        f.className="firework";
        f.style.left="50%";
        f.style.top="50%";
        f.style.background=`hsl(${Math.random()*360},100%,50%)`;
        f.style.setProperty("--x",`${Math.random()*400-200}px`);
        f.style.setProperty("--y",`${Math.random()*400-200}px`);
        document.body.appendChild(f);
        setTimeout(()=>f.remove(),1000);
    }
}

function spin(){
    clearInterval(timer);
    let t = +time.value;

    timer = setInterval(()=>{
        output.innerText = Math.floor(Math.random()*100);
    },50);

    setTimeout(()=>{
        clearInterval(timer);

        let final = getRig();
        if(final===null){
            if(mode==="range"){
                final = getRandomRange(+min.value,+max.value);
            }else{
                let arr=list.value.split(",").map(x=>parseInt(x.trim())).filter(Boolean);
                final = getRandomList(arr);
            }
        }

        if(final===null){
            alert("ƒê√£ h·∫øt s·ªë!");
            return;
        }

        output.innerText = final;
        history.push(final);
        localStorage.setItem("history",JSON.stringify(history));
        renderHistory();
        firework();
    },t);
}

function resetHistory(){
    if(confirm("X√≥a to√†n b·ªô l·ªãch s·ª≠?")){
        history=[];
        localStorage.removeItem("history");
        renderHistory();
        output.innerText="00";
    }
}

/* üîê PH√çM T·∫ÆT HI·ªÜN / ·∫®N RIG
   Ctrl + Alt + R  */
document.addEventListener("keydown",function(e){
    if(e.ctrlKey && e.altKey && e.key.toLowerCase()==="r"){
        e.preventDefault();
        rigPanel.classList.toggle("hidden");
    }
});
</script>

</body>
</html>


<!-- <!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>S·ªë May M·∫Øn</title>

<style>
body{
    margin:0;
    font-family: Arial, sans-serif;
    background:#b9f5d6;
}
.container{
    max-width:380px;
    margin:20px auto;
    background:#fff;
    border-radius:16px;
    padding:20px;
    box-shadow:0 10px 30px rgba(0,0,0,.1);
}
.tab{
    display:flex;
    background:#eee;
    border-radius:30px;
    overflow:hidden;
    margin-bottom:20px;
}
.tab div{
    flex:1;
    padding:10px;
    text-align:center;
    font-weight:bold;
    background:#6ee64d;
    color:#fff;
}
h2{text-align:center;}
.option{
    display:flex;
    gap:20px;
    margin-bottom:15px;
}
.option label{
    display:flex;
    align-items:center;
    gap:6px;
}
.group{margin-bottom:15px;}
.group input,.group select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:16px;
}
.button button{
    width:100%;
    padding:14px;
    font-size:18px;
    border:none;
    border-radius:30px;
    background:#111;
    color:#fff;
    cursor:pointer;
}
.result{
    margin-top:15px;
    background:#f8f8f8;
    border-radius:12px;
    padding:15px;
    text-align:center;
}
.result span{
    font-size:48px;
    color:red;
    font-weight:bold;
}
#history{
    margin-top:10px;
    font-size:14px;
    text-align:left;
    max-height:120px;
    overflow:auto;
}
.hidden{display:none;}

.firework{
    position:fixed;
    width:6px;
    height:6px;
    background:red;
    border-radius:50%;
    animation:explode 1s ease-out forwards;
}
@keyframes explode{
    to{
        transform:translate(var(--x),var(--y));
        opacity:0;
    }
}
</style>
</head>

<body>

<div class="container">
    <div class="tab">
        <div>S·ªê MAY M·∫ÆN</div>
    </div>

    <h2>CH·ªåN S·ªê NG·∫™U NHI√äN</h2>

    <div class="option">
        <label><input type="radio" name="mode" checked onclick="setMode('range')"> Ch·ªçn s·ªë</label>
        <label><input type="radio" name="mode" onclick="setMode('list')"> Nh·∫≠p s·ªë</label>
    </div>

    <div id="rangeMode">
        <div class="group">
            <label>T·ª´ s·ªë:</label>
            <input type="number" id="min" value="1">
        </div>
        <div class="group">
            <label>ƒê·∫øn s·ªë:</label>
            <input type="number" id="max" value="50">
        </div>
    </div>

    <div id="listMode" class="hidden">
        <div class="group">
            <label>Nh·∫≠p v√†o:</label>
            <input type="text" id="list" placeholder="01,34,78,89,90">
        </div>
    </div>

    <div class="group">
        <label>Th·ªùi gian quay:</label>
        <select id="time">
            <option value="3000">3 gi√¢y</option>
            <option value="5000" selected>5 gi√¢y</option>
            <option value="10000">10 gi√¢y</option>
            <option value="15000">15 gi√¢y</option>
            <option value="20000">20 gi√¢y</option>
        </select>
    </div>

    <div class="button">
        <button onclick="spin()">QUAY S·ªê</button>
    </div>

    <div class="button">
        <button onclick="resetHistory()" style="background:#e53935">
            Reset l·ªãch s·ª≠
        </button>
    </div>

    <div class="result">
        <span id="output">00</span>
        <div id="history"></div>
    </div>

    <hr>
    <div style="font-size:14px">
        <label>
            <input type="checkbox" id="rigMode"> Ch·∫ø ƒë·ªô rig
        </label>
        <input type="number" id="rigNumber"
               placeholder="S·ªë ƒë·∫∑t tr∆∞·ªõc"
               style="margin-top:6px">
    </div>
</div>

<audio id="bgMusic" src="spin.mp3" loop></audio>

<script>
let mode = "range";
let timer;
let history = JSON.parse(localStorage.getItem("history")) || [];

function setMode(m){
    mode = m;
    rangeMode.classList.toggle("hidden", m !== "range");
    listMode.classList.toggle("hidden", m !== "list");
}

function renderHistory(){
    historyDiv.innerHTML = history.map(n=>`üéâ ${n}`).join("<br>");
}
const historyDiv = document.getElementById("history");
renderHistory();

/* AUTO MUSIC */
window.addEventListener("click",()=>{
    document.getElementById("bgMusic").play();
},{once:true});

/* RANDOM */
function getRandomRange(min,max){
    let arr=[];
    for(let i=min;i<=max;i++){
        if(!history.includes(i)) arr.push(i);
    }
    if(arr.length===0) return null;
    return arr[Math.floor(Math.random()*arr.length)];
}

function getRandomList(arr){
    arr = arr.filter(n=>!history.includes(n));
    if(arr.length===0) return null;
    return arr[Math.floor(Math.random()*arr.length)];
}

/* RIG */
function getRig(){
    if(!rigMode.checked) return null;
    let n = parseInt(rigNumber.value);
    if(isNaN(n) || history.includes(n)) return null;
    return n;
}

/* FIREWORK */
function firework(){
    for(let i=0;i<30;i++){
        let f=document.createElement("div");
        f.className="firework";
        f.style.left="50%";
        f.style.top="50%";
        f.style.setProperty("--x",`${Math.random()*400-200}px`);
        f.style.setProperty("--y",`${Math.random()*400-200}px`);
        document.body.appendChild(f);
        setTimeout(()=>f.remove(),1000);
    }
}

function spin(){
    clearInterval(timer);
    let t = +time.value;
    timer = setInterval(()=>{
        output.innerText = Math.floor(Math.random()*100);
    },50);

    setTimeout(()=>{
        clearInterval(timer);

        let final = getRig();
        if(final===null){
            if(mode==="range"){
                final = getRandomRange(+min.value,+max.value);
            }else{
                let arr=list.value.split(",").map(x=>parseInt(x.trim())).filter(Boolean);
                final = getRandomList(arr);
            }
        }
        if(final===null){
            alert("ƒê√£ h·∫øt s·ªë!");
            return;
        }

        output.innerText = final;
        history.push(final);
        localStorage.setItem("history",JSON.stringify(history));
        renderHistory();
        firework();
    },t);
}

function resetHistory(){
    if(confirm("X√≥a to√†n b·ªô l·ªãch s·ª≠?")){
        history=[];
        localStorage.removeItem("history");
        renderHistory();
        output.innerText="00";
    }
}
</script>

</body>
</html> -->